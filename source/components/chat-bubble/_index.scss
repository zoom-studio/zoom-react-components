div.zoomrc-chat-bubble {
  width: 100%;
  display: flex;
  align-items: flex-end;
  gap: 10px;

  * {
    word-wrap: break-word;
  }

  &.is-me {
    > .message {
      border-radius: 8px 8px 20px;
      background-color: color(layer, 2);
    }
  }

  &.is-them {
    flex-direction: row-reverse;

    > .message {
      &::before {
        right: unset;
        left: -7px;
        border-right: unset;
        border-left: 20px solid color(border, 2);
        border-bottom-left-radius: unset;
        border-bottom-right-radius: 16px 14px;
        transform: translate(0, -2px);
      }

      &::after {
        right: unset;
        left: 18px;
        border-bottom-left-radius: unset;
        border-bottom-right-radius: 10px;
        transform: translate(-30px, -2px);
      }
    }
  }

  > .message {
    background-color: color(border, 2);
    border-radius: 8px 8px 8px 20px;
    padding: 10px;
    width: fit-content;
    max-width: 85%;
    min-width: 200px;
    position: relative;

    &::before {
      content: '';
      position: absolute;
      z-index: 1;
      bottom: -1px;
      right: -7px;
      height: 20px;
      border-right: 20px solid color(layer, 2);
      border-bottom-left-radius: 16px 14px;
      transform: translate(0, -2px);
    }

    &::after {
      content: '';
      position: absolute;
      z-index: 1;
      bottom: -1px;
      right: -42px;
      width: 12px;
      height: 26px;
      background: color(layer, 1);
      border-bottom-left-radius: 10px;
      transform: translate(-30px, -2px);
    }

    > * {
      position: relative;
      z-index: 2;
    }

    > .info {
      color: color(text, 1);
      display: flex;
      gap: 10px;
      user-select: none;

      > .time {
        margin: 0;
      }

      > .zoomrc-spin {
        > .spinner {
          width: 14px;
          height: 14px;
        }
      }
    }

    > .important {
      color: color(error);
      display: flex;
      gap: 4px;
      border: 1px dashed color(error, glassy, 5);
      border-radius: 6px;
      background-color: color(error, glassy, 1);
      padding: 6px 8px 4px;
      margin: 0 0 14px;
      user-select: none;

      > .zoomrc-typography {
        margin: -2px 0 0;
      }

      > .zoomrc-icon {
        display: inline-block;
        height: fit-content;
      }
    }
  }

  &:not(.show-arrow) {
    > .message {
      border-radius: 8px;

      &::after,
      &::before {
        content: unset;
      }
    }
  }

  > .avatar {
    width: 40px;
    height: 40px;
    position: relative;
    z-index: 2;
  }
}

@include ltr {
  div.zoomrc-chat-bubble {
    &.is-them {
      > .message {
        &::before {
          left: unset;
          right: -7px;
          border-left: 20px solid color(border, 2);
          border-bottom-right-radius: unset;
          border-bottom-left-radius: 16px 14px;
        }

        &::after {
          left: unset;
          right: -42px;
          border-bottom-right-radius: unset;
          border-bottom-left-radius: 10px;
        }
      }
    }

    &.is-me {
      > .message {
        &::before {
          right: unset;
          left: -7px;
          border-left: 20px solid color(layer, 2);
          border-bottom-left-radius: unset;
          border-bottom-right-radius: 16px 14px;
          transform: translate(0, -2px);
        }

        &::after {
          right: unset;
          left: 18px;
          border-bottom-left-radius: unset;
          border-bottom-right-radius: 10px;
          transform: translate(-30px, -2px);
        }
      }
    }
  }
}
